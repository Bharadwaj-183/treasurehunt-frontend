{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/shanmukh bharadwaj/Desktop/project/treasurehunt-frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/shanmukh bharadwaj/Desktop/project/treasurehunt-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/shanmukh bharadwaj/Desktop/project/treasurehunt-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import\"./PirateLogin.css\";import{useState,useEffect}from\"react\";import{useNavigate}from\"react-router-dom\";import{useSelector,useDispatch}from\"react-redux\";import{currentActions}from\"../store/current-slice\";import{fetchAllUsers}from\"../store/user-slice\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PirateLogin=function PirateLogin(){var dispatch=useDispatch();var navigate=useNavigate();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),userId=_useState2[0],setUserId=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),nouser=_useState6[0],setNouser=_useState6[1];// const users = useSelector((state) => state.user);\nvar currentUser=useSelector(function(state){return state.current.currentUser;});// console.log(users);\n// console.log(users);\nuseEffect(function(){dispatch(fetchAllUsers());return function(){};},[dispatch]);// const postData = async () => {\n//   const response = await fetch(\"http://localhost:8080/demo\", {\n//     method: \"POST\",\n//     body: JSON.stringify({\n//       userId: \"bharadwaj\",\n//       password: \"1234567\",\n//       stage1Time: 0,\n//       stage2Time: 0,\n//       stage3Time: 0,\n//       stage4Time: 0,\n//       stage5Time: 0,\n//       stage1Points: 0,\n//       stage2Points: 0,\n//       stage3Points: 0,\n//       stage4Points: 0,\n//       stage5Points: 0,\n//       overallPoints: 0,\n//     }),\n//     headers: {\n//       \"Content-Type\": \"application/json\",\n//     },\n//   });\n//   return response;\n//   // console.log(\"in frontemd\", data);\n// };\nvar checkLogin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"https://treasurehunt-back.vercel.app/demo/login\",{method:\"POST\",body:JSON.stringify({userId:userId,password:password}),headers:{\"Content-Type\":\"application/json\"}}).then(function(response){if(response.status===404){// console.log(\"errorrrr\");\nsetNouser(true);}else{setNouser(false);return response.json();}}).catch(function(err){console.log(err);});case 2:response=_context.sent;console.log(\"response in checklogin\",response);// const ans = response.text();\n// console.log(ans);\nreturn _context.abrupt(\"return\",response);case 5:case\"end\":return _context.stop();}},_callee);}));return function checkLogin(){return _ref.apply(this,arguments);};}();var handleLogin=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var res;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return checkLogin();case 2:res=_context2.sent;console.log(\"ans\",res);if(res.userId===userId){dispatch(currentActions.setCurrent(userId));console.log(\"current user\",currentUser);navigate(\"/pirate/welcome\");}else{// console.log(res);\n}case 5:case\"end\":return _context2.stop();}},_callee2);}));return function handleLogin(){return _ref2.apply(this,arguments);};}();var handleSignup=function handleSignup(){navigate(\"/piratesignup\");};return/*#__PURE__*/_jsx(\"div\",{id:\"pirateHome\",children:/*#__PURE__*/_jsxs(\"div\",{id:\"pirateDiv\",children:[\"Enter userId :\",\" \",/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(event){return setUserId(event.target.value);},type:\"text\"}),/*#__PURE__*/_jsx(\"br\",{}),\"Enter Password :\",\" \",/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(event){return setPassword(event.target.value);},type:\"password\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{className:\"piratebtn success\",onClick:handleLogin,children:\"Login\"}),/*#__PURE__*/_jsx(\"br\",{}),\"New User ? \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{className:\"piratebtn success\",onClick:handleSignup,children:\"SignUp\"}),nouser&&/*#__PURE__*/_jsx(\"p\",{id:\"wrongAnswer\",children:\"Invalid userId or password\"})]})});};export default PirateLogin;","map":{"version":3,"names":["useState","useEffect","useNavigate","useSelector","useDispatch","currentActions","fetchAllUsers","jsx","_jsx","jsxs","_jsxs","PirateLogin","dispatch","navigate","_useState","_useState2","_slicedToArray","userId","setUserId","_useState3","_useState4","password","setPassword","_useState5","_useState6","nouser","setNouser","currentUser","state","current","checkLogin","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","fetch","method","body","JSON","stringify","headers","then","status","json","catch","err","console","log","sent","abrupt","stop","apply","arguments","handleLogin","_ref2","_callee2","res","_callee2$","_context2","setCurrent","handleSignup","id","children","onChange","event","target","value","type","className","onClick"],"sources":["C:/Users/shanmukh bharadwaj/Desktop/project/treasurehunt-frontend/src/components/PirateLogin.js"],"sourcesContent":["import \"./PirateLogin.css\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { currentActions } from \"../store/current-slice\";\r\nimport { fetchAllUsers } from \"../store/user-slice\";\r\n\r\nconst PirateLogin = () => {\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n  const [userId, setUserId] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [nouser, setNouser] = useState(false);\r\n  // const users = useSelector((state) => state.user);\r\n  const currentUser = useSelector((state) => state.current.currentUser);\r\n  // console.log(users);\r\n  // console.log(users);\r\n  useEffect(() => {\r\n    dispatch(fetchAllUsers());\r\n    return () => {};\r\n  }, [dispatch]);\r\n\r\n  // const postData = async () => {\r\n  //   const response = await fetch(\"http://localhost:8080/demo\", {\r\n  //     method: \"POST\",\r\n  //     body: JSON.stringify({\r\n  //       userId: \"bharadwaj\",\r\n  //       password: \"1234567\",\r\n  //       stage1Time: 0,\r\n  //       stage2Time: 0,\r\n  //       stage3Time: 0,\r\n  //       stage4Time: 0,\r\n  //       stage5Time: 0,\r\n  //       stage1Points: 0,\r\n  //       stage2Points: 0,\r\n  //       stage3Points: 0,\r\n  //       stage4Points: 0,\r\n  //       stage5Points: 0,\r\n  //       overallPoints: 0,\r\n  //     }),\r\n  //     headers: {\r\n  //       \"Content-Type\": \"application/json\",\r\n  //     },\r\n  //   });\r\n  //   return response;\r\n  //   // console.log(\"in frontemd\", data);\r\n  // };\r\n\r\n  const checkLogin = async () => {\r\n    const response = await fetch(\r\n      \"https://treasurehunt-back.vercel.app/demo/login\",\r\n      {\r\n        method: \"POST\",\r\n        body: JSON.stringify({ userId: userId, password: password }),\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      }\r\n    )\r\n      .then((response) => {\r\n        if (response.status === 404) {\r\n          // console.log(\"errorrrr\");\r\n          setNouser(true);\r\n        } else {\r\n          setNouser(false);\r\n          return response.json();\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n\r\n    console.log(\"response in checklogin\", response);\r\n\r\n    // const ans = response.text();\r\n    // console.log(ans);\r\n    return response;\r\n  };\r\n\r\n  const handleLogin = async () => {\r\n    // console.log(userId);\r\n    // console.log(password);\r\n    // console.log(props.users);\r\n    // const userFound = users.find((item) => item.userId === userId);\r\n    // // console.log(userFound);\r\n    // if (userFound) {\r\n    //   if (userFound.password === password) {\r\n    //     dispatch(currentActions.setCurrent(userId));\r\n    //     navigate(\"/pirate/welcome\");\r\n    //   }\r\n    // } else {\r\n    //   navigate(\"/pirate/error\");\r\n    // }\r\n    const res = await checkLogin();\r\n    console.log(\"ans\", res);\r\n    if (res.userId === userId) {\r\n      dispatch(currentActions.setCurrent(userId));\r\n      console.log(\"current user\", currentUser);\r\n      navigate(\"/pirate/welcome\");\r\n    } else {\r\n      // console.log(res);\r\n    }\r\n  };\r\n\r\n  const handleSignup = () => {\r\n    navigate(\"/piratesignup\");\r\n  };\r\n  return (\r\n    <div id=\"pirateHome\">\r\n      <div id=\"pirateDiv\">\r\n        Enter userId :{\" \"}\r\n        <input\r\n          onChange={(event) => setUserId(event.target.value)}\r\n          type=\"text\"\r\n        />\r\n        <br />\r\n        Enter Password :{\" \"}\r\n        <input\r\n          onChange={(event) => setPassword(event.target.value)}\r\n          type=\"password\"\r\n        />\r\n        <br />\r\n        {/* <button onClick={handleLogin}>Login</button> */}\r\n        <button className=\"piratebtn success\" onClick={handleLogin}>\r\n          Login\r\n        </button>\r\n        <br />\r\n        New User ? <br />\r\n        <button className=\"piratebtn success\" onClick={handleSignup}>\r\n          SignUp\r\n        </button>\r\n        {/* <a href=\"/piratesignup\"> </a> */}\r\n        {nouser && <p id=\"wrongAnswer\">Invalid userId or password</p>}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PirateLogin;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}